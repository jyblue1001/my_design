v {xschem version=3.4.6 file_version=1.2}
G {}
K {}
V {}
S {}
E {}
B 2 2120 -1230 2730 -680 {flags=graph

y2=1.8
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=-1.9013027e-06
x2=8.0986972e-06
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=0
logy=0











linewidth_mult=4
























y1=-3.8e-16


color="6 7 11"
node="vin+
vin-
vdd"}
B 2 1310 -1500 1470 -1380 {flags=graph

y2=1.8
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=-1.9013027e-06
x2=8.0986972e-06
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=0
logy=0











linewidth_mult=0.6
























y1=-0.1


color=6
node=v_out}
B 2 630 -1250 860 -1070 {flags=graph

y2=1.9739002
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=-1.9013027e-06
x2=8.0986972e-06
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=0
logy=0











linewidth_mult=1
























y1=-0.18609979



node="vdd
vin-
vin+"
color="7 6 4"}
B 2 630 -830 860 -690 {flags=graph

y2=6.6e-09
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=-1.9013027e-06
x2=8.0986972e-06
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=0
logy=0











linewidth_mult=1
























y1=-1.2e-08




color=6
node=i(vmeas5)}
B 2 2120 -640 2730 -90 {flags=graph

y2=0.0038
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=-1.9013027e-06
x2=8.0986972e-06
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=0
logy=0











linewidth_mult=4
























y1=-0.00011



color=7
node=v_out}
B 2 1280 -1840 1610 -1590 {flags=graph

y2=1.7
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=-1.9013027e-06
x2=8.0986972e-06
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=0
logy=0











linewidth_mult=0.6
























y1=1.5e-135



color=7
node="\\"vdd vin+ -\\""}
B 2 630 -1040 860 -860 {flags=graph

y2=1.8
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=-1.9013027e-06
x2=8.0986972e-06
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=0
logy=0











linewidth_mult=1
























y1=-0.63




color="7 6 12"
node="start_up
v_top
v_out"}
B 2 1640 -1840 1970 -1590 {flags=graph

y2=1.6
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=-1.9013027e-06
x2=8.0986972e-06
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=0
logy=0











linewidth_mult=0.6
























y1=-1




color=6
node="\\"@m.xm2.msky130_fd_pr__pfet_01v8[vth] @m.xm2.msky130_fd_pr__pfet_01v8[vds] @m.xm2.msky130_fd_pr__pfet_01v8[vgs] - +\\""}
B 2 920 -1840 1250 -1590 {flags=graph

y2=1.3390474
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=-1.9013027e-06
x2=8.0986972e-06
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=0
logy=0











linewidth_mult=0.6
























y1=-0.10095256



color=7
node="\\"vdd v_top -\\""}
B 2 1280 -2110 1610 -1860 {flags=graph

y2=1.3390474
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=-1.9013027e-06
x2=8.0986972e-06
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=0
logy=0











linewidth_mult=0.6
























y1=-0.10095256



color=7
node=v_out}
B 2 1640 -2110 1970 -1860 {flags=graph

y2=1.4
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=-1.9013027e-06
x2=8.0986972e-06
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=0
logy=0











linewidth_mult=0.6
























y1=-1.1



color="6 7"
node="\\"vdd v_top @m.xm2.msky130_fd_pr__pfet_01v8[vth] + -\\"

\\"@m.xm2.msky130_fd_pr__pfet_01v8[vth] v_top vin+ - +\\""}
B 2 630 -1500 860 -1360 {flags=graph

y2=3.3e-08
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=-1.9013027e-06
x2=8.0986972e-06
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=0
logy=0











linewidth_mult=1
























y1=0





color=6
node=i(@m.xm4.msky130_fd_pr__pfet_01v8[id])}
N 1110 -650 1490 -650 {
lab=GND}
N 1070 -730 1070 -650 {
lab=GND}
N 1450 -730 1450 -650 {
lab=GND}
N 1070 -650 1110 -650 {
lab=GND}
N 1150 -1340 1290 -1340 {
lab=V_TOP}
N 1290 -1340 1450 -1340 {
lab=V_TOP}
N 1110 -1530 1110 -1370 {
lab=VDD}
N 1110 -1530 1490 -1530 {
lab=VDD}
N 1490 -1530 1490 -1370 {
lab=VDD}
N 1490 -1530 1900 -1530 {
lab=VDD}
N 950 -1020 1110 -1020 {
lab=Vin-}
N 1490 -810 1490 -760 {lab=Vbe2}
N 1680 -810 1680 -650 {lab=GND}
N 950 -810 950 -650 {lab=GND}
N 1490 -1020 1680 -1020 {lab=Vin+}
N 1490 -650 1680 -650 {lab=GND}
N 1900 -890 1900 -650 {lab=GND}
N 1680 -650 1900 -650 {lab=GND}
N 1490 -1340 1530 -1340 {lab=VDD}
N 1530 -1410 1530 -1340 {lab=VDD}
N 1070 -1340 1110 -1340 {lab=VDD}
N 1070 -1410 1070 -1340 {lab=VDD}
N 1900 -1530 1900 -1370 {
lab=VDD}
N 1900 -1340 1940 -1340 {lab=VDD}
N 1940 -1410 1940 -1340 {lab=VDD}
N 1900 -1410 1940 -1410 {lab=VDD}
N 1430 -1340 1430 -1290 {lab=V_TOP}
N 1430 -1290 1840 -1290 {lab=V_TOP}
N 1840 -1340 1840 -1290 {lab=V_TOP}
N 1840 -1340 1860 -1340 {lab=V_TOP}
N 1900 -1150 2000 -1150 {lab=V_OUT}
N 1310 -1090 1490 -1090 {lab=Vin+}
N 1110 -1090 1270 -1090 {lab=Vin-}
N 950 -650 1070 -650 {lab=GND}
N 1490 -700 1490 -650 {lab=GND}
N 1110 -700 1110 -650 {lab=GND}
N 1490 -910 1490 -870 {lab=#net1}
N 1110 -920 1110 -760 {lab=#net2}
N 1900 -1020 1900 -950 {lab=#net3}
N 1900 -1310 1900 -1080 {lab=V_OUT}
N 1490 -1310 1490 -1260 {lab=#net4}
N 1110 -1310 1110 -1260 {lab=#net5}
N 900 -1340 900 -1300 {lab=V_TOP}
N 560 -1240 560 -1150 {lab=start_up}
N 560 -1530 560 -1370 {
lab=VDD}
N 520 -1340 560 -1340 {lab=VDD}
N 520 -1410 520 -1340 {lab=VDD}
N 520 -1410 560 -1410 {lab=VDD}
N 560 -1310 560 -1240 {lab=start_up}
N 560 -1530 1110 -1530 {lab=VDD}
N 900 -1340 990 -1340 {lab=V_TOP}
N 990 -1340 990 -1290 {lab=V_TOP}
N 990 -1290 1230 -1290 {lab=V_TOP}
N 560 -1270 860 -1270 {lab=start_up}
N 560 -650 950 -650 {lab=GND}
N 1290 -1340 1290 -1220 {lab=V_TOP}
N 1110 -1200 1110 -980 {lab=Vin-}
N 1490 -1200 1490 -970 {lab=Vin+}
N 1230 -1340 1230 -1290 {lab=V_TOP}
N 900 -1120 1110 -1120 {lab=Vin-}
N 520 -1050 560 -1050 {lab=GND}
N 520 -1120 520 -1050 {lab=GND}
N 520 -1120 560 -1120 {lab=GND}
N 560 -1090 560 -1020 {lab=GND}
N 560 -730 560 -650 {lab=GND}
N 900 -1270 940 -1270 {lab=VDD}
N 900 -1140 900 -1120 {lab=Vin-}
N 900 -1240 900 -1200 {lab=#net6}
N 560 -1020 560 -730 {lab=GND}
N 1680 -920 1680 -870 {lab=#net7}
N 1680 -1020 1680 -980 {lab=Vin+}
N 950 -1020 950 -980 {lab=Vin-}
N 950 -920 950 -870 {lab=#net8}
N 600 -1340 900 -1340 {lab=V_TOP}
N 560 -1180 620 -1180 {lab=start_up}
N 620 -1180 620 -1120 {lab=start_up}
N 600 -1120 620 -1120 {lab=start_up}
N 1070 -1410 1110 -1410 {lab=VDD}
N 1490 -1410 1530 -1410 {lab=VDD}
N 940 -1530 940 -1270 {lab=VDD}
C {devices/vsource.sym} 2550 -1410 0 0 {name=VDD value="pwl(0 0 1us 0 2us 1.8)" savecurrent=false
* }
C {devices/gnd.sym} 2550 -1380 0 0 {name=l3 lab=GND}
C {devices/vdd.sym} 2550 -1440 0 0 {name=l4 lab=VDD}
C {sky130_fd_pr/corner.sym} 2110 -1460 0 0 {name=CORNER only_toplevel=false corner=tt}
C {devices/code.sym} 2320 -1460 0 0 {name=Stimuli only_toplevel=false value="

.option wnflag=1
.option savecurrents

.save
+@m.xm1.msky130_fd_pr__nfet_01v8[gm]
+@m.xm2.msky130_fd_pr__nfet_01v8[gm]
+@m.xm3.msky130_fd_pr__nfet_01v8[gm]
+@m.xm4.msky130_fd_pr__pfet_01v8[gm]
+@m.xm5.msky130_fd_pr__pfet_01v8[gm]
+@m.xm6.msky130_fd_pr__nfet_01v8[gm]
+@m.xm7.msky130_fd_pr__pfet_01v8[gm]

.control

  save all
   tran 1u 3m
   * ac dec 20 1 1T

  write tb_opamp_bandgap_2.raw
  set appendwrite

.endc

"}
C {devices/gnd.sym} 1290 -650 0 0 {name=l1 lab=GND}
C {devices/vdd.sym} 1350 -1150 1 0 {name=l5 lab=VDD}
C {devices/gnd.sym} 1230 -1150 1 0 {name=l8 lab=GND
W=4}
C {devices/lab_pin.sym} 1490 -780 2 0 {name=p5 sig_type=std_logic lab=Vbe2}
C {devices/vdd.sym} 1290 -1530 0 0 {name=l2 lab=VDD}
C {devices/lab_pin.sym} 2000 -1150 2 0 {name=p4 sig_type=std_logic lab=V_OUT
}
C {sky130_fd_pr/pnp_05v5.sym} 1090 -730 0 0 {name=Q1
model=pnp_05v5_W3p40L3p40
m=1
spiceprefix=X
}
C {sky130_fd_pr/pnp_05v5.sym} 1470 -730 0 0 {name=Q2
model=pnp_05v5_W3p40L3p40
m=8
spiceprefix=X
}
C {devices/gnd.sym} 1470 -840 1 0 {name=l6 lab=GND}
C {devices/gnd.sym} 1660 -840 1 0 {name=l7 lab=GND}
C {devices/gnd.sym} 1880 -920 1 0 {name=l9 lab=GND}
C {sky130_fd_pr/pfet_01v8.sym} 1130 -1340 0 1 {name=M1
W=16
L=0.6
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8.sym} 1470 -1340 0 0 {name=M2
W=16
L=0.6
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8.sym} 1880 -1340 0 0 {name=M3
W=16
L=0.6
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {devices/gnd.sym} 930 -840 1 0 {name=l10 lab=GND}
C {lab_wire.sym} 1640 -1290 2 0 {name=p2 sig_type=std_logic lab=V_TOP}
C {lab_wire.sym} 1390 -1090 2 0 {name=p6 sig_type=std_logic lab=Vin+}
C {lab_wire.sym} 1200 -1090 2 1 {name=p1 sig_type=std_logic lab=Vin-}
C {ammeter.sym} 1110 -950 0 0 {name=Vmeas savecurrent=true spice_ignore=0}
C {ammeter.sym} 1490 -940 0 0 {name=Vmeas1 savecurrent=true spice_ignore=0}
C {ammeter.sym} 1900 -1050 0 0 {name=Vmeas2 savecurrent=true spice_ignore=0}
C {sky130_fd_pr/res_xhigh_po_0p35.sym} 1490 -840 0 0 {name=R1
L=3.5
model=res_xhigh_po_0p35
spiceprefix=X
mult=1}
C {sky130_fd_pr/res_xhigh_po_0p35.sym} 1680 -840 0 0 {name=R2
L=29
model=res_xhigh_po_0p35
spiceprefix=X
mult=1}
C {sky130_fd_pr/res_xhigh_po_0p35.sym} 950 -840 0 0 {name=R3
L=29
model=res_xhigh_po_0p35
spiceprefix=X
mult=1}
C {sky130_fd_pr/res_xhigh_po_0p35.sym} 1900 -920 0 0 {name=R4
L=29
model=res_xhigh_po_0p35
spiceprefix=X
mult=1}
C {ammeter.sym} 1110 -1230 0 0 {name=Vmeas3 savecurrent=true spice_ignore=0
L=1}
C {ammeter.sym} 1490 -1230 0 0 {name=Vmeas4 savecurrent=true spice_ignore=0}
C {sky130_fd_pr/nfet_01v8.sym} 580 -1120 0 1 {name=M5
W=1
L=10
nf=1 
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8.sym} 580 -1340 0 1 {name=M6
W=2
L=0.15
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {devices/lab_pin.sym} 560 -1270 2 1 {name=p7 sig_type=std_logic lab=start_up}
C {lab_wire.sym} 900 -1120 2 1 {name=p3 sig_type=std_logic lab=Vin-}
C {lab_wire.sym} 900 -1340 0 0 {name=p8 sig_type=std_logic lab=V_TOP}
C {ammeter.sym} 900 -1170 0 0 {name=Vmeas5 savecurrent=true spice_ignore=0
L=1}
C {sky130_fd_pr/pfet_01v8.sym} 880 -1270 0 0 {name=M4
W=2
L=0.15
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {ammeter.sym} 950 -950 0 0 {name=Vmeas6 savecurrent=true spice_ignore=0}
C {ammeter.sym} 1680 -950 0 0 {name=Vmeas7 savecurrent=true spice_ignore=0}
C {opamp_bandgap_2.sym} 1290 -1150 1 1 {name=x1}
C {ngspice_get_value.sym} 1450 -1270 2 0 {name=r5 node=v(@m.xm2.msky130_fd_pr__pfet_01v8[vth])
descr="vth="}
