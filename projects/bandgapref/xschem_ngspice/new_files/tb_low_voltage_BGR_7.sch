v {xschem version=3.4.6 file_version=1.2}
G {}
K {}
V {}
S {}
E {}
B 2 1310 -630 1780 -260 {flags=graph

y2=1.2e-05
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=0
x2=2
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=4
unitx=1
logx=0
logy=0











linewidth_mult=2
























y1=-3.8e-31





color="6 7"
node="i(vmeas)
i(vmeas1)"}
N 830 -1670 970 -1670 {
lab=Vbiasp}
N 970 -1670 1770 -1670 {
lab=Vbiasp}
N 790 -1860 790 -1700 {
lab=VDD}
N 790 -1860 1810 -1860 {
lab=VDD}
N 1810 -1860 1810 -1700 {
lab=VDD}
N 1810 -1670 1850 -1670 {lab=VDD}
N 1850 -1740 1850 -1670 {lab=VDD}
N 750 -1670 790 -1670 {lab=VDD}
N 750 -1740 750 -1670 {lab=VDD}
N 1750 -1670 1750 -1620 {lab=Vbiasp}
N 1750 -1620 1960 -1620 {lab=Vbiasp}
N 330 -1670 330 -1630 {lab=Vbiasp}
N 120 -1860 120 -1700 {
lab=VDD}
N 80 -1670 120 -1670 {lab=VDD}
N 80 -1740 80 -1670 {lab=VDD}
N 80 -1740 120 -1740 {lab=VDD}
N 120 -1640 120 -1570 {lab=start_up}
N 120 -1860 790 -1860 {lab=VDD}
N 670 -1670 670 -1620 {lab=Vbiasp}
N 670 -1620 910 -1620 {lab=Vbiasp}
N 120 -1600 290 -1600 {lab=start_up}
N 910 -1670 910 -1620 {lab=Vbiasp}
N 80 -1100 120 -1100 {lab=GND}
N 80 -1170 80 -1100 {lab=GND}
N 80 -1170 120 -1170 {lab=GND}
N 120 -1140 120 -1070 {lab=GND}
N 330 -1600 370 -1600 {lab=VDD}
N 330 -1470 330 -1450 {lab=V1}
N 330 -1570 330 -1530 {lab=#net1}
N 160 -1670 330 -1670 {lab=Vbiasp}
N 120 -1230 180 -1230 {lab=#net2}
N 180 -1230 180 -1170 {lab=#net2}
N 160 -1170 180 -1170 {lab=#net2}
N 750 -1740 790 -1740 {lab=VDD}
N 1810 -1740 1850 -1740 {lab=VDD}
N 370 -1860 370 -1600 {lab=VDD}
N 120 -820 120 -700 {lab=GND}
N 120 -1070 120 -820 {lab=GND}
N 580 -1450 790 -1450 {lab=V1}
N 120 -1390 120 -1200 {lab=#net2}
N 120 -1570 120 -1450 {lab=start_up}
N 330 -1450 580 -1450 {lab=V1}
N 330 -1670 670 -1670 {lab=Vbiasp}
N 790 -1230 790 -1080 {lab=Vbiasn}
N 790 -1020 790 -700 {lab=GND}
N 830 -1050 890 -1050 {lab=Vbiasn}
N 890 -1140 890 -1050 {lab=Vbiasn}
N 790 -1140 890 -1140 {lab=Vbiasn}
N 1710 -1050 1770 -1050 {lab=Vreg}
N 1710 -1140 1710 -1050 {lab=Vreg}
N 1710 -1140 1810 -1140 {lab=Vreg}
N 1810 -1310 1810 -1080 {lab=Vreg}
N 1810 -1020 1810 -900 {lab=#net3}
N 120 -700 790 -700 {lab=GND}
N 1810 -840 1810 -700 {lab=GND}
N 1810 -1640 1810 -1370 {lab=V2}
N 790 -1640 790 -1290 {lab=V1}
N 700 -1050 790 -1050 {lab=GND}
N 700 -1050 700 -960 {lab=GND}
N 700 -960 790 -960 {lab=GND}
N 1810 -1050 1900 -1050 {lab=GND}
N 1240 -1370 1340 -1370 {lab=#net4}
N 1200 -1340 1200 -1170 {lab=#net4}
N 1380 -1340 1380 -1170 {lab=Vbiasp}
N 1200 -1110 1200 -1070 {lab=GND}
N 1200 -1070 1380 -1070 {lab=GND}
N 1380 -1110 1380 -1070 {lab=GND}
N 1290 -1140 1290 -1070 {lab=GND}
N 1290 -1070 1290 -700 {lab=GND}
N 1200 -1320 1290 -1320 {lab=#net4}
N 1290 -1370 1290 -1320 {lab=#net4}
N 1160 -1370 1200 -1370 {lab=VDD}
N 1160 -1450 1160 -1370 {lab=VDD}
N 1160 -1450 1200 -1450 {lab=VDD}
N 1200 -1450 1200 -1400 {lab=VDD}
N 1380 -1370 1420 -1370 {lab=VDD}
N 1420 -1450 1420 -1370 {lab=VDD}
N 1380 -1450 1420 -1450 {lab=VDD}
N 1380 -1450 1380 -1400 {lab=VDD}
N 1200 -1450 1380 -1450 {lab=VDD}
N 1290 -1860 1290 -1450 {lab=VDD}
N 1380 -1290 1510 -1290 {lab=Vbiasp}
N 1510 -1670 1510 -1290 {lab=Vbiasp}
N 790 -700 1810 -700 {lab=GND}
N 1200 -1140 1380 -1140 {lab=GND}
N 890 -1140 1070 -1140 {lab=Vbiasn}
N 1070 -1250 1070 -1140 {lab=Vbiasn}
N 1070 -1250 1480 -1250 {lab=Vbiasn}
N 1480 -1250 1480 -1140 {lab=Vbiasn}
N 1420 -1140 1480 -1140 {lab=Vbiasn}
N 1130 -1050 1710 -1050 {lab=Vreg}
N 1130 -1140 1130 -1050 {lab=Vreg}
N 1130 -1140 1160 -1140 {lab=Vreg}
N 1960 -1720 1960 -1620 {lab=Vbiasp}
N 1900 -1050 1900 -770 {lab=GND}
N 1810 -770 1900 -770 {lab=GND}
C {devices/vsource.sym} 750 -500 0 0 {name=V1 value=1.8 savecurrent=false
* "pwl(0 0 1us 0 2us 1.8)"}
C {devices/gnd.sym} 750 -470 0 0 {name=l3 lab=GND}
C {sky130_fd_pr/corner.sym} 310 -550 0 0 {name=CORNER only_toplevel=false corner=tt}
C {devices/code.sym} 520 -550 0 0 {name=CODE only_toplevel=false value="

.option method=gear
.option wnflag=1
.option savecurrents
* .temp =140

.save
+@m.xm1.msky130_fd_pr__pfet_01v8[gm]
+@m.xm1.msky130_fd_pr__pfet_01v8[vth]
+@m.xm1.msky130_fd_pr__pfet_01v8[vgs]
+@m.xm1.msky130_fd_pr__pfet_01v8[vds]
+@m.xm2.msky130_fd_pr__pfet_01v8[gm]
+@m.xm2.msky130_fd_pr__pfet_01v8[vth]
+@m.xm2.msky130_fd_pr__pfet_01v8[vgs]
+@m.xm2.msky130_fd_pr__pfet_01v8[vds]
+@m.xm3.msky130_fd_pr__pfet_01v8[gm]
+@m.xm4.msky130_fd_pr__pfet_01v8[gm]
+@m.xm4.msky130_fd_pr__nfet_01v8[gm]
+@m.x1.xm1.msky130_fd_pr__nfet_01v8[gm]
+@m.x1.xm2.msky130_fd_pr__nfet_01v8[gm]
+@m.x1.xm3.msky130_fd_pr__nfet_01v8[gm]
+@m.x1.xm4.msky130_fd_pr__pfet_01v8[gm]
+@m.x1.xm5.msky130_fd_pr__pfet_01v8[gm]
+@m.x1.xm6.msky130_fd_pr__nfet_01v8[gm]
+@m.x1.xm7.msky130_fd_pr__pfet_01v8[gm]
+@m.x2.xm1.msky130_fd_pr__nfet_01v8[gm]
+@m.x2.xm2.msky130_fd_pr__nfet_01v8[gm]
+@m.x2.xm3.msky130_fd_pr__nfet_01v8[gm]
+@m.x2.xm4.msky130_fd_pr__pfet_01v8[gm]
+@m.x2.xm5.msky130_fd_pr__pfet_01v8[gm]
+@m.x2.xm6.msky130_fd_pr__pfet_01v8[gm]
+@m.x2.xm7.msky130_fd_pr__pfet_01v8[gm]

* .ic v(vin-) = 0.8
* .ic v(vin+) = 0.8
* .ic v(v_top) = 1.8

.control

  * let start_vdd = 0.3 
  * let stop_vdd = 1.8
  * let delta_vdd = 0.3
  * let w_act = start_vdd
  * while w_act le stop_vdd
    * echo $&w_act
    * alter V1 = w_act
    * echo v[vdd]
    * alter @V1[pwl] = [ 0 0 1us 0 2us $&w_act ]
    * reset
    save all
    * run
    * dc temp -40 120 5 V1 1.6 2.0 0.05
    * dc V1 1.7 1.9 0.001 temp -40 120 40
    * dc V1 0 2.0 0.01 temp -40 120 40
    dc V1 0 2.0 0.01
    * tran 1ns 8us
    remzerovec
    write tb_low_voltage_BGR_7.raw
    * let w_act = w_act + delta_vdd
    set appendwrite
  * end

.endc

"}
C {devices/vdd.sym} 940 -1860 0 0 {name=l2 lab=VDD}
C {devices/gnd.sym} 1830 -870 3 1 {name=l6 lab=GND}
C {sky130_fd_pr/pfet_01v8.sym} 810 -1670 0 1 {name=M1
W=10
L=0.6
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8.sym} 1790 -1670 0 0 {name=M2
W=10
L=0.6
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {lab_wire.sym} 1960 -1620 2 0 {name=p2 sig_type=std_logic lab=Vbiasp}
C {lab_wire.sym} 1710 -1140 0 0 {name=p6 sig_type=std_logic lab=Vreg}
C {lab_wire.sym} 890 -1140 0 1 {name=p1 sig_type=std_logic lab=Vbiasn}
C {ammeter.sym} 790 -1260 0 0 {name=Vmeas savecurrent=true spice_ignore=0}
C {ammeter.sym} 1810 -1340 0 0 {name=Vmeas1 savecurrent=true spice_ignore=0}
C {sky130_fd_pr/nfet_01v8.sym} 140 -1170 0 1 {name=M5
W=5
L=5
nf=1 
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8.sym} 140 -1670 0 1 {name=M6
W=10
L=0.6
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {devices/lab_pin.sym} 120 -1600 2 1 {name=p7 sig_type=std_logic lab=start_up}
C {sky130_fd_pr/pfet_01v8.sym} 310 -1600 0 0 {name=M4
W=10
L=0.6
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {ngspice_get_value.sym} 1770 -1600 2 0 {name=r5 node=v(@m.xm2.msky130_fd_pr__pfet_01v8[vth])
descr="vth="}
C {lab_wire.sym} 790 -1450 2 0 {name=p3 sig_type=std_logic lab=V1}
C {lab_wire.sym} 1810 -1450 2 1 {name=p9 sig_type=std_logic lab=V2}
C {sky130_fd_pr/nfet_01v8.sym} 810 -1050 0 1 {name=M7
W=5
L=0.6
nf=1 
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8.sym} 1790 -1050 0 0 {name=M8
W=20
L=0.6
nf=1 
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {devices/vdd.sym} 750 -530 0 0 {name=l1 lab=VDD}
C {devices/gnd.sym} 1080 -700 0 0 {name=l4 lab=GND}
C {ammeter.sym} 330 -1500 0 0 {name=Vmeas2 savecurrent=true spice_ignore=0}
C {ammeter.sym} 120 -1420 0 0 {name=Vmeas3 savecurrent=true spice_ignore=0}
C {sky130_fd_pr/nfet_01v8.sym} 1180 -1140 0 0 {name=M9
W=5
L=0.6
nf=1 
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8.sym} 1400 -1140 0 1 {name=M10
W=5
L=0.6
nf=1 
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8.sym} 1220 -1370 0 1 {name=M11
W=10
L=0.6
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8.sym} 1360 -1370 0 0 {name=M12
W=10
L=0.6
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/res_xhigh_po_0p35.sym} 1810 -870 0 1 {name=R7
L=0.90
model=res_xhigh_po_0p35
spiceprefix=X
mult=1}
