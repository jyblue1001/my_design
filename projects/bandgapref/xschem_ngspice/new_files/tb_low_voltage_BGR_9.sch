v {xschem version=3.4.6 file_version=1.2}
G {}
K {}
V {}
S {}
E {}
B 2 2080 -1870 2690 -1320 {flags=graph

y2=1.5
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=3.1202715e-06
x2=3.4017465e-06
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=0
logy=0











linewidth_mult=1
























y1=-1.2e-27


color="6 7"
node="vin-
vin+"}
B 2 2080 -1280 2690 -730 {flags=graph

y2=2.1
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=3.1202715e-06
x2=3.4017465e-06
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=0
logy=0











linewidth_mult=2
























y1=-0.11



color=7
node=v_out}
B 2 2080 -690 2690 -140 {flags=graph

y2=1.2e-05
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=3.1202715e-06
x2=3.4017465e-06
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=0
logy=0











linewidth_mult=2
























y1=0




color=6
node=i(@m.x1.xm1.msky130_fd_pr__nfet_01v8[id])}
B 2 1280 -630 1890 -80 {flags=graph

y2=1.7e-06
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=3.1202715e-06
x2=3.4017465e-06
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=0
logy=0











linewidth_mult=2
























y1=-1.4e-30





color="6 7"
node="i(vmeas5)
i(vmeas4)"}
B 2 2080 -2480 2690 -1930 {flags=graph

y2=0.77
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=3.1202715e-06
x2=3.4017465e-06
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=0
logy=0











linewidth_mult=1
























y1=-0.00052


color="6 7"
node="v1
v2"}
B 2 1310 -2570 1920 -2020 {flags=graph

y2=1.8
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=3.1202715e-06
x2=3.4017465e-06
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=0
logy=0











linewidth_mult=1
























y1=-0.002


color=6
node=v_top}
N 980 -700 1360 -700 {
lab=GND}
N 940 -780 940 -700 {
lab=GND}
N 1320 -780 1320 -700 {
lab=GND}
N 940 -700 980 -700 {
lab=GND}
N 1020 -1670 1160 -1670 {
lab=V_TOP}
N 1160 -1670 1320 -1670 {
lab=V_TOP}
N 980 -1860 980 -1700 {
lab=VDD}
N 980 -1860 1360 -1860 {
lab=VDD}
N 1360 -1860 1360 -1700 {
lab=VDD}
N 1360 -1860 1850 -1860 {
lab=VDD}
N 1360 -1000 1360 -810 {lab=Vbe2}
N 1570 -930 1570 -700 {lab=GND}
N 1360 -700 1570 -700 {lab=GND}
N 1850 -930 1850 -700 {lab=GND}
N 1570 -700 1850 -700 {lab=GND}
N 1360 -1670 1400 -1670 {lab=VDD}
N 1400 -1740 1400 -1670 {lab=VDD}
N 940 -1670 980 -1670 {lab=VDD}
N 940 -1740 940 -1670 {lab=VDD}
N 1850 -1860 1850 -1700 {
lab=VDD}
N 1850 -1670 1890 -1670 {lab=VDD}
N 1890 -1740 1890 -1670 {lab=VDD}
N 1850 -1740 1890 -1740 {lab=VDD}
N 1300 -1670 1300 -1620 {lab=V_TOP}
N 1300 -1620 1790 -1620 {lab=V_TOP}
N 1790 -1670 1790 -1620 {lab=V_TOP}
N 1790 -1670 1810 -1670 {lab=V_TOP}
N 1850 -1480 1950 -1480 {lab=V_OUT}
N 820 -700 940 -700 {lab=GND}
N 1360 -750 1360 -700 {lab=GND}
N 980 -750 980 -700 {lab=GND}
N 1360 -1230 1360 -1060 {lab=#net1}
N 980 -1230 980 -810 {lab=#net2}
N 1850 -1640 1850 -1290 {lab=V_OUT}
N 1360 -1640 1360 -1590 {lab=#net3}
N 980 -1640 980 -1590 {lab=#net4}
N 520 -1670 520 -1630 {lab=V_TOP}
N 310 -1860 310 -1700 {
lab=VDD}
N 270 -1670 310 -1670 {lab=VDD}
N 270 -1740 270 -1670 {lab=VDD}
N 270 -1740 310 -1740 {lab=VDD}
N 310 -1640 310 -1570 {lab=start_up}
N 310 -1860 980 -1860 {lab=VDD}
N 860 -1670 860 -1620 {lab=V_TOP}
N 860 -1620 1100 -1620 {lab=V_TOP}
N 310 -1600 480 -1600 {lab=start_up}
N 310 -700 820 -700 {lab=GND}
N 980 -1530 980 -1290 {lab=V1}
N 1360 -1530 1360 -1290 {lab=V2}
N 1100 -1670 1100 -1620 {lab=V_TOP}
N 270 -1100 310 -1100 {lab=GND}
N 270 -1170 270 -1100 {lab=GND}
N 270 -1170 310 -1170 {lab=GND}
N 310 -1140 310 -1070 {lab=GND}
N 520 -1600 560 -1600 {lab=VDD}
N 520 -1470 520 -1450 {lab=V1}
N 520 -1570 520 -1530 {lab=#net5}
N 350 -1670 520 -1670 {lab=V_TOP}
N 310 -1230 370 -1230 {lab=#net6}
N 370 -1230 370 -1170 {lab=#net6}
N 350 -1170 370 -1170 {lab=#net6}
N 940 -1740 980 -1740 {lab=VDD}
N 1360 -1740 1400 -1740 {lab=VDD}
N 560 -1860 560 -1600 {lab=VDD}
N 310 -820 310 -700 {lab=GND}
N 310 -1070 310 -820 {lab=GND}
N 1850 -1230 1850 -990 {lab=#net7}
N 1570 -1220 1570 -990 {lab=Vin+}
N 1570 -1360 1570 -1280 {lab=#net8}
N 1360 -1480 1570 -1480 {lab=V2}
N 1570 -1480 1570 -1420 {lab=V2}
N 1180 -1150 1570 -1150 {lab=Vin+}
N 770 -930 770 -700 {lab=GND}
N 770 -1220 770 -990 {lab=Vin-}
N 770 -1360 770 -1280 {lab=#net9}
N 770 -1480 770 -1420 {lab=V1}
N 770 -1150 1140 -1150 {lab=Vin-}
N 770 -1480 980 -1480 {lab=V1}
N 310 -1390 310 -1200 {lab=#net6}
N 310 -1570 310 -1450 {lab=start_up}
N 1180 -1300 1180 -1150 {lab=Vin+}
N 1140 -1300 1140 -1150 {lab=Vin-}
N 1160 -1670 1160 -1430 {lab=V_TOP}
N 520 -1450 770 -1450 {lab=V1}
N 520 -1670 860 -1670 {lab=V_TOP}
N 1610 -1730 1610 -1720 {lab=V_TOP}
N 1610 -1720 1610 -1620 {lab=V_TOP}
N 1610 -1860 1610 -1780 {lab=VDD}
N 1210 -1150 1210 -1110 {lab=Vin+}
N 1110 -1150 1110 -1110 {lab=Vin-}
N 1210 -1050 1210 -700 {lab=GND}
N 1110 -1050 1110 -700 {lab=GND}
C {devices/vsource.sym} 940 -500 0 0 {name=V1 value="pwl(0 0 1us 0 2us 1.8)" savecurrent=false
* 1.8}
C {devices/gnd.sym} 940 -470 0 0 {name=l3 lab=GND}
C {devices/vdd.sym} 940 -530 0 0 {name=l4 lab=VDD}
C {sky130_fd_pr/corner.sym} 500 -550 0 0 {name=CORNER only_toplevel=false corner=tt}
C {devices/code.sym} 700 -550 0 0 {name=CODE only_toplevel=false value="

.option method=gear
.option wnflag=1
.option savecurrents
* .temp =140

.save
+@m.xm1.msky130_fd_pr__pfet_01v8[gm]
+@m.xm1.msky130_fd_pr__pfet_01v8[vth]
+@m.xm1.msky130_fd_pr__pfet_01v8[vgs]
+@m.xm1.msky130_fd_pr__pfet_01v8[vds]
+@m.xm2.msky130_fd_pr__pfet_01v8[gm]
+@m.xm2.msky130_fd_pr__pfet_01v8[vth]
+@m.xm2.msky130_fd_pr__pfet_01v8[vgs]
+@m.xm2.msky130_fd_pr__pfet_01v8[vds]
+@m.xm3.msky130_fd_pr__pfet_01v8[gm]
+@m.xm4.msky130_fd_pr__pfet_01v8[gm]
+@m.xm4.msky130_fd_pr__nfet_01v8[gm]
+@m.x1.xm1.msky130_fd_pr__nfet_01v8[gm]
+@m.x1.xm2.msky130_fd_pr__nfet_01v8[gm]
+@m.x1.xm3.msky130_fd_pr__nfet_01v8[gm]
+@m.x1.xm4.msky130_fd_pr__pfet_01v8[gm]
+@m.x1.xm5.msky130_fd_pr__pfet_01v8[gm]
+@m.x1.xm6.msky130_fd_pr__nfet_01v8[gm]
+@m.x1.xm7.msky130_fd_pr__pfet_01v8[gm]
+@m.x2.xm1.msky130_fd_pr__nfet_01v8[gm]
+@m.x2.xm2.msky130_fd_pr__nfet_01v8[gm]
+@m.x2.xm3.msky130_fd_pr__nfet_01v8[gm]
+@m.x2.xm4.msky130_fd_pr__pfet_01v8[gm]
+@m.x2.xm5.msky130_fd_pr__pfet_01v8[gm]
+@m.x2.xm6.msky130_fd_pr__pfet_01v8[gm]
+@m.x2.xm7.msky130_fd_pr__pfet_01v8[gm]

* .ic v(vin-) = 0.8
* .ic v(vin+) = 0.8
* .ic v(v_top) = 1.8

.control

    save all
    * dc temp -40 120 5 V1 1.6 2.0 0.05
    * dc V1 1.7 1.9 0.001 temp -40 120 40
    * dc V1 0.0 2.0 0.02 temp -40 120 40
    * dc V1 0 2.0 0.02
    tran 1ns 8us
    remzerovec
    * write tb_low_voltage_BGR_9.raw
    write tb_low_voltage_BGR_9_2.raw

.endc

"}
C {devices/gnd.sym} 1150 -700 0 0 {name=l1 lab=GND}
C {devices/vdd.sym} 1220 -1360 1 0 {name=l5 lab=VDD}
C {devices/gnd.sym} 1100 -1360 1 0 {name=l8 lab=GND
W=4}
C {devices/lab_pin.sym} 1360 -910 2 0 {name=p5 sig_type=std_logic lab=Vbe2}
C {devices/vdd.sym} 1130 -1860 0 0 {name=l2 lab=VDD}
C {devices/lab_pin.sym} 1950 -1480 2 0 {name=p4 sig_type=std_logic lab=V_OUT
}
C {sky130_fd_pr/pnp_05v5.sym} 960 -780 0 0 {name=Q1
model=pnp_05v5_W3p40L3p40
m=1
spiceprefix=X
}
C {sky130_fd_pr/pnp_05v5.sym} 1340 -780 0 0 {name=Q2
model=pnp_05v5_W3p40L3p40
m=8
spiceprefix=X
}
C {devices/gnd.sym} 1340 -1030 1 0 {name=l6 lab=GND}
C {devices/gnd.sym} 1550 -960 1 0 {name=l7 lab=GND
L=35.875}
C {devices/gnd.sym} 1830 -960 1 0 {name=l9 lab=GND
L=35.875}
C {sky130_fd_pr/pfet_01v8.sym} 1000 -1670 0 1 {name=M1
W=20
L=0.6
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8.sym} 1340 -1670 0 0 {name=M2
W=20
L=0.6
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8.sym} 1830 -1670 0 0 {name=M3
W=20
L=0.6
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {lab_wire.sym} 1510 -1620 2 0 {name=p2 sig_type=std_logic lab=V_TOP}
C {lab_wire.sym} 1260 -1150 2 0 {name=p6 sig_type=std_logic lab=Vin+}
C {lab_wire.sym} 1070 -1150 2 1 {name=p1 sig_type=std_logic lab=Vin-}
C {ammeter.sym} 980 -1260 0 0 {name=Vmeas savecurrent=true spice_ignore=0}
C {ammeter.sym} 1360 -1260 0 0 {name=Vmeas1 savecurrent=true spice_ignore=0}
C {ammeter.sym} 770 -1390 0 0 {name=Vmeas2 savecurrent=true spice_ignore=0}
C {sky130_fd_pr/res_xhigh_po_0p35.sym} 1360 -1030 0 0 {name=R1
L=11
model=res_xhigh_po_0p35
spiceprefix=X
mult=1}
C {sky130_fd_pr/res_xhigh_po_0p35.sym} 1570 -960 0 0 {name=R2
L=80
model=res_xhigh_po_0p35
spiceprefix=X
mult=1}
C {sky130_fd_pr/res_xhigh_po_0p35.sym} 1850 -960 0 0 {name=R4
L=100
model=res_xhigh_po_0p35
spiceprefix=X
mult=1}
C {ammeter.sym} 1570 -1390 0 0 {name=Vmeas3 savecurrent=true spice_ignore=0
L=1}
C {ammeter.sym} 980 -1560 0 0 {name=Vmeas4 savecurrent=true spice_ignore=0}
C {sky130_fd_pr/nfet_01v8.sym} 330 -1170 0 1 {name=M5
W=1
L=10
nf=1 
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8.sym} 330 -1670 0 1 {name=M6
W=20
L=0.6
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {devices/lab_pin.sym} 310 -1600 2 1 {name=p7 sig_type=std_logic lab=start_up}
C {lab_wire.sym} 520 -1670 0 0 {name=p8 sig_type=std_logic lab=V_TOP}
C {ammeter.sym} 1360 -1560 0 0 {name=Vmeas5 savecurrent=true spice_ignore=0
L=1}
C {sky130_fd_pr/pfet_01v8.sym} 500 -1600 0 0 {name=M4
W=20
L=0.6
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {ammeter.sym} 520 -1500 0 0 {name=Vmeas7 savecurrent=true spice_ignore=0}
C {opamp_bandgap_2.sym} 1160 -1360 1 1 {name=x1}
C {ngspice_get_value.sym} 1320 -1600 2 0 {name=r5 node=v(@m.xm2.msky130_fd_pr__pfet_01v8[vth])
descr="vth="}
C {devices/gnd.sym} 1550 -1250 1 0 {name=l11 lab=GND}
C {sky130_fd_pr/res_xhigh_po_0p35.sym} 1570 -1250 0 0 {name=R6
L=20
model=res_xhigh_po_0p35
spiceprefix=X
mult=1}
C {devices/gnd.sym} 790 -960 3 1 {name=l12 lab=GND}
C {sky130_fd_pr/res_xhigh_po_0p35.sym} 770 -960 0 1 {name=R7
L=80
model=res_xhigh_po_0p35
spiceprefix=X
mult=1}
C {ammeter.sym} 1850 -1260 0 1 {name=Vmeas8 savecurrent=true spice_ignore=0}
C {devices/gnd.sym} 790 -1250 3 1 {name=l13 lab=GND}
C {sky130_fd_pr/res_xhigh_po_0p35.sym} 770 -1250 0 1 {name=R8
L=20
model=res_xhigh_po_0p35
spiceprefix=X
mult=1}
C {ammeter.sym} 310 -1420 0 1 {name=Vmeas6 savecurrent=true spice_ignore=0}
C {lab_wire.sym} 980 -1450 2 0 {name=p3 sig_type=std_logic lab=V1}
C {lab_wire.sym} 1360 -1480 2 1 {name=p9 sig_type=std_logic lab=V2}
C {sky130_fd_pr/cap_mim_m3_1.sym} 1110 -1080 0 0 {name=C1 model=cap_mim_m3_1 W=10 L=10 MF=1 spiceprefix=X}
C {sky130_fd_pr/cap_mim_m3_1.sym} 1210 -1080 0 0 {name=C2 model=cap_mim_m3_1 W=10 L=10 MF=1 spiceprefix=X}
