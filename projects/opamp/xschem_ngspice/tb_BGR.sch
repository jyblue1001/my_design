v {xschem version=3.4.6 file_version=1.2}
G {}
K {}
V {}
S {}
E {}
B 2 2097.13051406096 -1190 2887.13051406096 -710 {flags=graph
y1=-6.9
y2=-0.49
ypos1=0
ypos2=2
divy=5
subdivy=8
unity=1
x1=0
x2=12
divx=5
subdivx=8
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=1
logy=1











linewidth_mult=2

color=7
node=pfet_gate_10ua}
B 2 2097.13051406096 -640 2887.13051406096 -160 {flags=graph
y1=-180
y2=180
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=0
x2=12
divx=5
subdivx=8
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=1
logy=0











linewidth_mult=2


color=7
node=ph(pfet_gate_10ua)}
B 2 2947.13051406096 -1190 3737.13051406096 -710 {flags=graph
y1=-1.7
y2=0.49
ypos1=0
ypos2=2
divy=5
subdivy=8
unity=1
x1=0
x2=12
divx=5
subdivx=8
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=1
logy=1











linewidth_mult=2


color=7
node=v_cur_ref_reg}
B 2 2947.13051406096 -640 3737.13051406096 -160 {flags=graph
y1=-82
y2=170
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=0
x2=12
divx=5
subdivx=8
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=1
logy=0











linewidth_mult=2



color=7
node=ph(v_cur_ref_reg)}
B 2 2097.13051406096 -1720 2887.13051406096 -1240 {flags=graph
y1=0.0015
y2=3.8
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=1
x2=1e+12
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=0
logy=0











linewidth_mult=2

color=7
node=pfet_gate_10ua}
B 2 930 -870 1300 -620 {flags=graph

y2=1.1e-05
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=1
x2=1e+12
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=0
unitx=1
logx=0
logy=0











linewidth_mult=2
























y1=1e-05





color=4
node=i(@m.xm59.msky130_fd_pr__pfet_01v8[id])}
B 2 240 -940 610 -690 {flags=graph

y2=1.113705
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=1
x2=1e+12
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=0
unitx=1
logx=0
logy=0











linewidth_mult=2
























y1=1.113704






color=7
node=v_bgr_ref}
B 2 240 -650 610 -400 {flags=graph

y2=7.7e-06
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=1
x2=1e+12
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=0
unitx=1
logx=0
logy=0











linewidth_mult=2
























y1=0





color=4
node=i(@m.xm58.msky130_fd_pr__pfet_01v8[id])}
B 2 1480 -760 1850 -510 {flags=graph

y2=0.98
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=1
x2=1e+12
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=0
unitx=1
logx=0
logy=0











linewidth_mult=2
























y1=-1.8e-19






color=7
node=pfet_gate_10ua}
B 2 240 -1240 610 -990 {flags=graph

y2=0.78
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=1
x2=1e+12
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=0
unitx=1
logx=0
logy=0











linewidth_mult=2
























y1=-4.2e-13







color=7
node=v_top}
B 2 1480 -490 1850 -240 {flags=graph

y2=1.8
ypos1=0
ypos2=2
divy=5
subdivy=4
unity=1
x1=1
x2=1e+12
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=0
unitx=1
logx=0
logy=0











linewidth_mult=2
























y1=-2e-09





color=7
node=v_cur_ref_reg}
N 630 120 630 150 {
lab=VDD}
N 850 -440 850 -410 {
lab=Vin}
N 400 -1430 670 -1430 {lab=V_TOP}
N 1750 -1280 1750 -1230 {lab=VDD}
N 1750 -1200 1800 -1200 {lab=VDD}
N 1800 -1260 1800 -1200 {lab=VDD}
N 1750 -1260 1800 -1260 {lab=VDD}
N 1620 -1200 1710 -1200 {lab=pfet_gate_10uA}
N 1750 -900 1750 -840 {lab=GND}
N 1700 -870 1750 -870 {lab=GND}
N 1700 -930 1700 -870 {lab=GND}
N 1700 -930 1750 -930 {lab=GND}
N 1750 -1170 1750 -960 {lab=nfet_gate_10uA}
N 1820 -1000 1820 -930 {lab=nfet_gate_10uA}
N 1750 -1000 1820 -1000 {lab=nfet_gate_10uA}
N 1790 -930 1920 -930 {lab=nfet_gate_10uA}
N 710 -650 710 -540 {lab=GND}
N 710 -1540 710 -1460 {
lab=VDD}
N 710 -1430 750 -1430 {lab=VDD}
N 750 -1500 750 -1430 {lab=VDD}
N 710 -1500 750 -1500 {lab=VDD}
N 710 -1240 810 -1240 {lab=Vin}
N 710 -1400 710 -710 {lab=Vin}
N 1410 -1220 1450 -1220 {lab=VDD}
N 1450 -1290 1450 -1220 {lab=VDD}
N 1410 -1290 1450 -1290 {lab=VDD}
N 1160 -1220 1370 -1220 {lab=pfet_gate_10uA}
N 940 -1200 1030 -1200 {lab=V_CUR_REF_REG}
N 940 -1200 940 -940 {lab=V_CUR_REF_REG}
N 940 -940 1410 -940 {lab=V_CUR_REF_REG}
N 1410 -1190 1410 -860 {lab=V_CUR_REF_REG}
N 810 -1240 1030 -1240 {lab=Vin}
N 710 -1540 1410 -1540 {lab=VDD}
N 1410 -1540 1410 -1250 {lab=VDD}
N 710 -540 1410 -540 {lab=GND}
N 1410 -800 1410 -540 {lab=GND}
N 1310 -1220 1310 -1120 {lab=pfet_gate_10uA}
N 1310 -1120 1490 -1120 {lab=pfet_gate_10uA}
N 590 -1450 590 -1430 {lab=V_TOP}
N 590 -1540 590 -1510 {lab=VDD}
N 590 -1540 710 -1540 {lab=VDD}
N 1280 -1350 1280 -1220 {lab=pfet_gate_10uA}
N 1280 -1540 1280 -1410 {lab=VDD}
N 590 -1320 710 -1320 {lab=Vin}
N 590 -1430 590 -1380 {lab=V_TOP}
N 850 -1380 850 -1240 {lab=Vin}
N 850 -1540 850 -1440 {lab=VDD}
C {devices/vsource.sym} 630 180 0 0 {name=VDDA value=1.8 savecurrent=false}
C {devices/gnd.sym} 630 210 0 0 {name=l1 lab=GND}
C {devices/vsource.sym} 850 -380 0 0 {name=Vin1 value="1.1137 AC 1" savecurrent=false
* 0.9
* "sin(0.9 0.001 1k)"}
C {devices/gnd.sym} 850 -350 0 0 {name=l3 lab=GND}
C {devices/lab_pin.sym} 850 -440 0 1 {name=p2 sig_type=std_logic lab=Vin}
C {sky130_fd_pr/corner.sym} 1120 120 0 0 {name=CORNER only_toplevel=false corner=tt}
C {vdd.sym} 630 120 0 0 {name=l2 lab=VDD}
C {simulator_commands_shown.sym} -470 -1410 0 0 {name=COMMANDS
simulator=ngspice
only_toplevel=false 
value="

.option wnflag=1
.option savecurrents

* .param VDDGAUSS = agauss(1.8, 0.05, 1)
* .param VDD = VDDGAUSS
* .param VDD = 1.8

* .param TEMPGAUSS = agauss(40, 30, 1)
* .param temp = TEMPGAUSS
* .option temp = 26

.save
+@m.xm1.msky130_fd_pr__pfet_01v8[gm]
+@m.xm1.msky130_fd_pr__pfet_01v8[vds]
+@m.xm1.msky130_fd_pr__pfet_01v8[vth]
+@m.xm2.msky130_fd_pr__pfet_01v8[gm]
+@m.xm2.msky130_fd_pr__pfet_01v8[vds]
+@m.xm2.msky130_fd_pr__pfet_01v8[vth]
+@m.xm3.msky130_fd_pr__nfet_01v8[gm]
+@m.xm3.msky130_fd_pr__nfet_01v8[vds]
+@m.xm3.msky130_fd_pr__nfet_01v8[vth]
+@m.xm4.msky130_fd_pr__nfet_01v8[gm]
+@m.xm4.msky130_fd_pr__nfet_01v8[vds]
+@m.xm4.msky130_fd_pr__nfet_01v8[vth]
+@m.xm5.msky130_fd_pr__pfet_01v8[gm]
+@m.xm5.msky130_fd_pr__pfet_01v8[vds]
+@m.xm5.msky130_fd_pr__pfet_01v8[vth]
+@m.xm6.msky130_fd_pr__pfet_01v8[gm]
+@m.xm6.msky130_fd_pr__pfet_01v8[vds]
+@m.xm6.msky130_fd_pr__pfet_01v8[vth]
+@m.xm7.msky130_fd_pr__pfet_01v8[gm]
+@m.xm7.msky130_fd_pr__pfet_01v8[vds]
+@m.xm7.msky130_fd_pr__pfet_01v8[vth]
+@m.xm8.msky130_fd_pr__pfet_01v8[gm]
+@m.xm8.msky130_fd_pr__pfet_01v8[vds]
+@m.xm8.msky130_fd_pr__pfet_01v8[vth]

.control

  save all
  * tran 100p 1000n
  ac dec 20 1 1T
  write tb_BGR.raw
  set appendwrite
  show
.endc

"}
C {devices/vdd.sym} 330 -1500 0 0 {name=l9 lab=VDD}
C {devices/gnd.sym} 330 -1360 0 0 {name=l10 lab=GND}
C {sky130_fd_pr/pfet_01v8.sym} 1730 -1200 0 0 {name=M42
W=1
L=0.2
nf=1
mult=10
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {devices/vdd.sym} 1750 -1280 0 0 {name=l41 lab=VDD}
C {devices/gnd.sym} 1750 -840 0 0 {name=l42 lab=GND}
C {lab_wire.sym} 1920 -930 0 1 {name=p60 sig_type=std_logic lab=nfet_gate_10uA}
C {sky130_fd_pr/pfet_01v8.sym} 690 -1430 0 0 {name=M58
W=10
L=0.3
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/res_xhigh_po_0p35.sym} 710 -680 0 1 {name=R20
L=32
model=res_xhigh_po_0p35
spiceprefix=X
mult=1}
C {devices/vdd.sym} 1090 -1160 2 0 {name=l18 lab=VDD}
C {devices/gnd.sym} 1090 -1280 2 0 {name=l44 lab=GND
W=4}
C {devices/gnd.sym} 1390 -830 1 0 {name=l45 lab=GND
}
C {sky130_fd_pr/res_xhigh_po_0p35.sym} 1410 -830 0 0 {name=R21
L=15
model=res_xhigh_po_0p35
spiceprefix=X
mult=1}
C {sky130_fd_pr/pfet_01v8.sym} 1390 -1220 0 0 {name=M59
W=1
L=0.2
nf=1
mult=10
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {lab_wire.sym} 1410 -940 0 1 {name=p76 sig_type=std_logic lab=V_CUR_REF_REG}
C {lab_wire.sym} 810 -1240 0 1 {name=p77 sig_type=std_logic lab=Vin}
C {lab_wire.sym} 1490 -1120 0 1 {name=p78 sig_type=std_logic lab=pfet_gate_10uA}
C {devices/gnd.sym} 1050 -540 0 0 {name=l46 lab=GND}
C {devices/gnd.sym} 730 -680 3 0 {name=l47 lab=GND}
C {devices/vdd.sym} 1060 -1540 0 0 {name=l48 lab=VDD}
C {/foss/designs/my_design/projects/bandgapref/xschem_ngspice/new_files/BGR_vtop_out.sym} 330 -1430 0 0 {name=x1}
C {/foss/designs/my_design/projects/bandgapref/xschem_ngspice/new_files/opamp_bandgap_2.sym} 1090 -1220 2 1 {name=x2}
C {lab_wire.sym} 480 -1430 0 1 {name=p81 sig_type=std_logic lab=V_TOP}
C {lab_wire.sym} 1620 -1200 0 0 {name=p59 sig_type=std_logic lab=pfet_gate_10uA}
C {sky130_fd_pr/nfet_01v8.sym} 1770 -930 0 1 {name=M20
W=1
L=0.2
nf=1
mult=10
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/cap_mim_m3_1.sym} 1280 -1380 2 0 {name=C1 model=cap_mim_m3_1 W=100 L=100 MF=20 spiceprefix=X}
