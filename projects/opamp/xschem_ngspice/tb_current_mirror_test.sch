v {xschem version=3.4.6 file_version=1.2}
G {}
K {}
V {}
S {}
E {}
B 2 1890 80 2430 480 {flags=graph
y1=0.74
y2=0.76
ypos1=0
ypos2=2
divy=5
subdivy=1
unity=1
x1=1.2330457e-06
x2=7.2330458e-06
divx=5
subdivx=1
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=0
logy=0
color="7 6"
node="vin1
\\"vin2 0.248 -\\""}
B 2 1890 1110 2430 1510 {flags=graph
y1=0.16
y2=0.17
ypos1=0
ypos2=2
divy=5
subdivy=1
unity=1
x1=1.2330457e-06
x2=7.2330458e-06
divx=5
subdivx=1
xlabmag=1.0
ylabmag=1.0
node=vout2
color=7
dataset=-1
unitx=1
logx=0
logy=0
}
B 2 1890 2060 2430 2460 {flags=graph
y1=0.15
y2=0.27
ypos1=0
ypos2=2
divy=5
subdivy=1
unity=1
x1=1.2330457e-06
x2=7.2330458e-06
divx=5
subdivx=1
xlabmag=1.0
ylabmag=1.0
node="vout2
vout3
vout1"
color="7 6 11"
dataset=-1
unitx=1
logx=0
logy=0
}
B 2 1890 2510 2430 2910 {flags=graph
y1=7200000
y2=7300000
ypos1=0
ypos2=2
divy=5
subdivy=1
unity=1
x1=1.2330457e-06
x2=7.2330458e-06
divx=5
subdivx=1
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=0
logy=0
color=7
node="\\"@m.xm4.msky130_fd_pr__nfet_01v8[w] @m.xm6.msky130_fd_pr__nfet_01v8[l] * @m.xm4.msky130_fd_pr__nfet_01v8[l] @m.xm6.msky130_fd_pr__nfet_01v8[w] * / @m.xm4.msky130_fd_pr__nfet_01v8[gm] /\\""}
B 2 1890 1580 2430 1980 {flags=graph
y1=0.74
y2=0.75
ypos1=0
ypos2=2
divy=5
subdivy=1
unity=1
x1=1.2330457e-06
x2=7.2330458e-06
divx=5
subdivx=1
xlabmag=1.0
ylabmag=1.0
node="v2
v4
vin1"
color="7 6 11"
dataset=-1
unitx=1
logx=0
logy=0
}
B 2 1890 530 2430 930 {flags=graph
y1=0.15
y2=0.18
ypos1=0
ypos2=2
divy=5
subdivy=1
unity=1
x1=1.2330457e-06
x2=7.2330458e-06
divx=5
subdivx=1
xlabmag=1.0
ylabmag=1.0
node=vout1
color=7
dataset=-1
unitx=1
logx=0
logy=0
}
B 2 1890 3310 2430 3710 {flags=graph
y1=0.012223161
y2=0.012251308
ypos1=0
ypos2=2
divy=5
subdivy=1
unity=1
x1=1.2330457e-06
x2=7.2330458e-06
divx=5
subdivx=1
xlabmag=1.0
ylabmag=1.0
node=vout4
color=7
dataset=-1
unitx=1
logx=0
logy=0
}
N 1380 680 1380 790 {lab=GND}
N 1380 650 1430 650 {lab=GND}
N 1430 650 1430 710 {lab=GND}
N 1380 710 1430 710 {lab=GND}
N 1380 360 1380 620 {lab=Vout1}
N 1380 240 1380 300 {lab=VDD}
N 1380 500 1620 500 {lab=Vout1}
N 400 360 400 410 {lab=GND}
N 400 250 400 300 {lab=Vin1}
N 760 2000 760 2060 {lab=VDD}
N 760 2480 760 2590 {lab=GND}
N 760 2370 840 2370 {lab=v3}
N 840 2370 840 2450 {lab=v3}
N 800 2450 840 2450 {lab=v3}
N 710 2450 760 2450 {lab=GND}
N 840 2450 980 2450 {lab=v3}
N 710 2450 710 2510 {lab=GND}
N 710 2510 760 2510 {lab=GND}
N 1490 2480 1490 2590 {lab=GND}
N 1490 2450 1540 2450 {lab=GND}
N 1540 2450 1540 2510 {lab=GND}
N 1490 2510 1540 2510 {lab=GND}
N 1040 2450 1450 2450 {lab=v4}
N 1490 2160 1490 2420 {lab=Vout3}
N 1490 2040 1490 2100 {lab=VDD}
N 1220 2190 1220 2290 {lab=Vin2}
N 1220 2350 1220 2450 {lab=v4}
N 1490 2300 1730 2300 {lab=Vout3}
N 760 2120 760 2250 {lab=vg}
N 760 2310 760 2420 {lab=v3}
N 800 2280 1010 2280 {lab=vg}
N 1010 2280 1010 2410 {lab=vg}
N 760 2200 840 2200 {lab=vg}
N 840 2200 840 2280 {lab=vg}
N 760 2510 1010 2510 {lab=GND}
N 1010 2450 1010 2510 {lab=GND}
N 710 2280 710 2450 {lab=GND}
N 710 2280 760 2280 {lab=GND}
N 760 1290 760 1350 {lab=VDD}
N 760 1410 760 1510 {lab=v1}
N 760 1570 760 1680 {lab=GND}
N 760 1460 840 1460 {lab=v1}
N 840 1460 840 1540 {lab=v1}
N 800 1540 840 1540 {lab=v1}
N 710 1540 760 1540 {lab=GND}
N 840 1540 980 1540 {lab=v1}
N 710 1540 710 1600 {lab=GND}
N 710 1600 760 1600 {lab=GND}
N 1490 1570 1490 1680 {lab=GND}
N 1490 1540 1540 1540 {lab=GND}
N 1540 1540 1540 1600 {lab=GND}
N 1490 1600 1540 1600 {lab=GND}
N 1040 1540 1450 1540 {lab=v2}
N 1490 1250 1490 1510 {lab=Vout2}
N 1490 1130 1490 1190 {lab=VDD}
N 1220 1280 1220 1380 {lab=Vin2}
N 1220 1440 1220 1540 {lab=v2}
N 1490 1390 1730 1390 {lab=Vout2}
N 1090 650 1340 650 {lab=Vin1}
N 650 360 650 410 {lab=GND}
N 650 250 650 300 {lab=Vin2}
N 1490 3640 1490 3750 {lab=GND}
N 1490 3610 1540 3610 {lab=GND}
N 1540 3610 1540 3670 {lab=GND}
N 1490 3670 1540 3670 {lab=GND}
N 1490 3320 1490 3580 {lab=Vout4}
N 1490 3200 1490 3260 {lab=VDD}
N 960 3610 1060 3610 {lab=Vin2}
N 1120 3610 1220 3610 {lab=v5}
N 1490 3460 1730 3460 {lab=Vout4}
N 1220 3610 1450 3610 {lab=v5}
N 1220 3720 1220 3770 {lab=GND}
N 1220 3610 1220 3660 {lab=v5}
C {gnd.sym} 1380 780 0 0 {name=l2 lab=GND}
C {sky130_fd_pr/nfet_01v8.sym} 1360 650 0 0 {name=M1
W=20
L=0.15
nf=1 
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/res_xhigh_po_0p35.sym} 1380 330 2 0 {name=R2
L=2.1
model=res_xhigh_po_0p35
spiceprefix=X
mult=1}
C {gnd.sym} 1400 330 3 1 {name=l3 lab=GND}
C {vdd.sym} 1380 240 0 0 {name=l4 lab=VDD}
C {lab_pin.sym} 1090 650 2 1 {name=p7 sig_type=std_logic lab=Vin1}
C {lab_pin.sym} 1620 500 2 0 {name=p1 sig_type=std_logic lab=Vout1}
C {simulator_commands_shown.sym} 140 800 0 0 {name=COMMANDS
simulator=ngspice
only_toplevel=false 
value="
.option method=gear
.option wnflag=1
.option savecurrents

.save
+@m.xm1.msky130_fd_pr__nfet_01v8[gm]
+@m.xm1.msky130_fd_pr__nfet_01v8[vth]
+@m.xm1.msky130_fd_pr__nfet_01v8[vds]
+@m.xm1.msky130_fd_pr__nfet_01v8[w]
+@m.xm1.msky130_fd_pr__nfet_01v8[l]
+@m.xm2.msky130_fd_pr__nfet_01v8[gm]
+@m.xm2.msky130_fd_pr__nfet_01v8[vth]
+@m.xm2.msky130_fd_pr__nfet_01v8[vds]
+@m.xm2.msky130_fd_pr__nfet_01v8[w]
+@m.xm2.msky130_fd_pr__nfet_01v8[l]
+@m.xm3.msky130_fd_pr__nfet_01v8[gm]
+@m.xm3.msky130_fd_pr__nfet_01v8[vth]
+@m.xm3.msky130_fd_pr__nfet_01v8[vds]
+@m.xm3.msky130_fd_pr__nfet_01v8[w]
+@m.xm3.msky130_fd_pr__nfet_01v8[l]
+@m.xm4.msky130_fd_pr__nfet_01v8[gm]
+@m.xm4.msky130_fd_pr__nfet_01v8[vth]
+@m.xm4.msky130_fd_pr__nfet_01v8[vds]
+@m.xm4.msky130_fd_pr__nfet_01v8[w]
+@m.xm4.msky130_fd_pr__nfet_01v8[l]
+@m.xm5.msky130_fd_pr__nfet_01v8[gm]
+@m.xm5.msky130_fd_pr__nfet_01v8[vth]
+@m.xm5.msky130_fd_pr__nfet_01v8[vds]
+@m.xm5.msky130_fd_pr__nfet_01v8[w]
+@m.xm5.msky130_fd_pr__nfet_01v8[l]
+@m.xm6.msky130_fd_pr__nfet_01v8[gm]
+@m.xm6.msky130_fd_pr__nfet_01v8[vth]
+@m.xm6.msky130_fd_pr__nfet_01v8[vds]
+@m.xm6.msky130_fd_pr__nfet_01v8[w]
+@m.xm6.msky130_fd_pr__nfet_01v8[l]
+@m.xm7.msky130_fd_pr__nfet_01v8[gm]
+@m.xm7.msky130_fd_pr__nfet_01v8[vth]
+@m.xm7.msky130_fd_pr__nfet_01v8[vds]
+@m.xm7.msky130_fd_pr__nfet_01v8[w]
+@m.xm1.msky130_fd_pr__nfet_01v8[l]

.control

  save all
  * dc VDD 0 1.8 0.9
  * tran 0.4u 3m
  tran 0.4n 6u
  * ac dec 20 1 1T
  remzerovec
  write tb_current_mirror_test.raw
  set appendwrite

.endc

"}
C {devices/gnd.sym} 400 410 0 0 {name=l6 lab=GND}
C {lab_wire.sym} 400 250 0 0 {name=p42 sig_type=std_logic lab=Vin1}
C {devices/vsource.sym} 400 330 0 0 {name=V2 value="sin(0.745 0.001 1Meg)" savecurrent=false
* 1.24
* "sin(1.24 0.001 1Meg)"}
C {sky130_fd_pr/corner.sym} 250 540 0 0 {name=CORNER only_toplevel=false corner=tt}
C {devices/vsource.sym} 200 320 0 0 {name=VDD value=1.8 savecurrent=false
"pwl(0 0 1us 0 2us 1.8)"}
C {devices/gnd.sym} 200 350 0 0 {name=l5 lab=GND}
C {devices/vdd.sym} 200 290 0 0 {name=l7 lab=VDD}
C {vdd.sym} 760 2010 0 0 {name=l12 lab=VDD}
C {isource.sym} 760 2090 0 0 {name=I2 value=4u}
C {gnd.sym} 760 2580 0 1 {name=l16 lab=GND}
C {gnd.sym} 1490 2580 0 0 {name=l17 lab=GND}
C {sky130_fd_pr/res_xhigh_po_0p35.sym} 1490 2130 2 0 {name=R12
L=2.1
model=res_xhigh_po_0p35
spiceprefix=X
mult=1}
C {gnd.sym} 1510 2130 3 1 {name=l18 lab=GND}
C {vdd.sym} 1490 2040 0 0 {name=l19 lab=VDD}
C {lab_pin.sym} 1220 2190 1 0 {name=p10 sig_type=std_logic lab=Vin2}
C {sky130_fd_pr/cap_mim_m3_1.sym} 1220 2320 2 0 {name=C3 model=cap_mim_m3_1 W=10 L=10 MF=1 spiceprefix=X}
C {lab_pin.sym} 1730 2300 2 0 {name=p11 sig_type=std_logic lab=Vout3}
C {lab_wire.sym} 840 2370 0 1 {name=p12 sig_type=std_logic lab=v3}
C {lab_wire.sym} 1220 2450 2 0 {name=p13 sig_type=std_logic lab=v4}
C {lab_wire.sym} 1010 2280 0 1 {name=p14 sig_type=std_logic lab=vg}
C {devices/ngspice_get_value.sym} 660 2260 0 1 {name=r13 node=@m.xm4.msky130_fd_pr__nfet_01v8[gm]
descr="gm="}
C {devices/ngspice_get_value.sym} 660 2320 0 1 {name=r14 node=v(@m.xm4.msky130_fd_pr__nfet_01v8[vth])
descr="vth="}
C {devices/ngspice_get_value.sym} 660 2440 0 1 {name=r15 node=@m.xm5.msky130_fd_pr__nfet_01v8[gm]
descr="gm="}
C {devices/ngspice_get_value.sym} 660 2500 0 1 {name=r16 node=v(@m.xm5.msky130_fd_pr__nfet_01v8[vth])
descr="vth="}
C {devices/ngspice_get_value.sym} 1060 2500 0 0 {name=r17 node=@m.xm6.msky130_fd_pr__nfet_01v8[gm]
descr="gm="}
C {devices/ngspice_get_value.sym} 1060 2560 0 0 {name=r18 node=v(@m.xm6.msky130_fd_pr__nfet_01v8[vth])
descr="vth="}
C {devices/ngspice_get_value.sym} 1440 2500 0 1 {name=r19 node=@m.xm7.msky130_fd_pr__nfet_01v8[gm]
descr="gm="}
C {devices/ngspice_get_value.sym} 1440 2560 0 1 {name=r20 node=v(@m.xm7.msky130_fd_pr__nfet_01v8[vth])
descr="vth="}
C {vdd.sym} 760 1300 0 0 {name=l8 lab=VDD}
C {isource.sym} 760 1380 0 0 {name=I1 value=5u}
C {gnd.sym} 760 1670 0 1 {name=l11 lab=GND}
C {sky130_fd_pr/nfet_01v8.sym} 780 1540 0 1 {name=M2
W=1
L=0.15
nf=1 
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/res_xhigh_po_0p35.sym} 1010 1540 3 0 {name=R3
L=1930
model=res_xhigh_po_0p35
spiceprefix=X
mult=1}
C {gnd.sym} 1010 1560 0 1 {name=l13 lab=GND}
C {gnd.sym} 1490 1670 0 0 {name=l14 lab=GND}
C {sky130_fd_pr/nfet_01v8.sym} 1470 1540 0 0 {name=M3
W=20
L=0.15
nf=1 
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/res_xhigh_po_0p35.sym} 1490 1220 2 0 {name=R4
L=2.1
model=res_xhigh_po_0p35
spiceprefix=X
mult=1}
C {gnd.sym} 1510 1220 3 1 {name=l15 lab=GND}
C {vdd.sym} 1490 1130 0 0 {name=l20 lab=VDD}
C {lab_pin.sym} 1220 1280 1 0 {name=p4 sig_type=std_logic lab=Vin2}
C {sky130_fd_pr/cap_mim_m3_1.sym} 1220 1410 2 0 {name=C2 model=cap_mim_m3_1 W=10 L=10 MF=1 spiceprefix=X}
C {lab_pin.sym} 1730 1390 2 0 {name=p5 sig_type=std_logic lab=Vout2}
C {lab_wire.sym} 840 1460 0 1 {name=p6 sig_type=std_logic lab=v1}
C {lab_wire.sym} 1220 1540 2 0 {name=p8 sig_type=std_logic lab=v2}
C {sky130_fd_pr/nfet_01v8.sym} 780 2280 0 1 {name=M4
W=10
L=0.15
nf=1 
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8.sym} 780 2450 0 1 {name=M5
W=1
L=0.15
nf=1 
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8.sym} 1010 2430 3 1 {name=M6
W=1
L=10
nf=1 
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8.sym} 1470 2450 0 0 {name=M7
W=20
L=0.15
nf=1 
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {devices/gnd.sym} 650 410 0 0 {name=l1 lab=GND}
C {lab_wire.sym} 650 250 0 0 {name=p2 sig_type=std_logic lab=Vin2}
C {devices/vsource.sym} 650 330 0 0 {name=V1 value="sin(1.24 0.001 1Meg)" savecurrent=false
* 1.24
* "sin(1.24 0.001 1Meg)"}
C {gnd.sym} 1490 3740 0 0 {name=l21 lab=GND}
C {sky130_fd_pr/res_xhigh_po_0p35.sym} 1490 3290 2 0 {name=R1
L=2.1
model=res_xhigh_po_0p35
spiceprefix=X
mult=1}
C {gnd.sym} 1510 3290 3 1 {name=l22 lab=GND}
C {vdd.sym} 1490 3200 0 0 {name=l23 lab=VDD}
C {lab_pin.sym} 960 3610 2 1 {name=p3 sig_type=std_logic lab=Vin2}
C {sky130_fd_pr/cap_mim_m3_1.sym} 1090 3610 1 1 {name=C1 model=cap_mim_m3_1 W=10 L=10 MF=1 spiceprefix=X}
C {lab_pin.sym} 1730 3460 2 0 {name=p9 sig_type=std_logic lab=Vout4}
C {lab_wire.sym} 1220 3610 0 1 {name=p16 sig_type=std_logic lab=v5
}
C {devices/ngspice_get_value.sym} 1440 3660 0 1 {name=r11 node=@m.xm7.msky130_fd_pr__nfet_01v8[gm]
descr="gm="}
C {devices/ngspice_get_value.sym} 1440 3720 0 1 {name=r21 node=v(@m.xm7.msky130_fd_pr__nfet_01v8[vth])
descr="vth="}
C {sky130_fd_pr/nfet_01v8.sym} 1470 3610 0 0 {name=M11
W=20
L=0.15
nf=1 
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {devices/gnd.sym} 1220 3770 0 0 {name=l9 lab=GND}
C {devices/vsource.sym} 1220 3690 0 0 {name=V3 value=1.02 savecurrent=false
* "sin(1 0.001 1Meg)"
* "sin(1.24 0.001 1Meg)"}
