v {xschem version=3.4.5 file_version=1.2
}
G {}
K {}
V {}
S {}
E {}
B 2 20 -1720 1940 -940 {flags=graph
y1=-0.043
y2=1.9
ypos1=0
ypos2=2
divy=5
subdivy=1
unity=1
x1=1.2227361e-08
x2=1.2573237e-08
divx=5
subdivx=4
xlabmag=1.0
ylabmag=1.0


dataset=-1
unitx=1
logx=0
logy=0
linewidth_mult=6

color=6
node=osc}
N 730 -410 730 -370 {
lab=#net1}
N 660 -440 690 -440 {
lab=osc}
N 660 -440 660 -340 {
lab=osc}
N 660 -340 690 -340 {
lab=osc}
N 1190 -410 1190 -370 {
lab=#net2}
N 1120 -440 1150 -440 {
lab=#net1}
N 1120 -440 1120 -340 {
lab=#net1}
N 1120 -340 1150 -340 {
lab=#net1}
N 730 -390 1120 -390 {
lab=#net1}
N 1650 -410 1650 -370 {
lab=osc}
N 1580 -440 1610 -440 {
lab=#net2}
N 1580 -440 1580 -340 {
lab=#net2}
N 1580 -340 1610 -340 {
lab=#net2}
N 1190 -390 1580 -390 {
lab=#net2}
N 730 -100 730 -50 {
lab=GND}
N 1650 -100 1650 -50 {
lab=GND}
N 1190 -100 1190 -50 {
lab=GND}
N 1650 -390 1830 -390 {
lab=osc}
N 580 -240 1830 -240 {
lab=osc}
N 580 -390 580 -240 {
lab=osc}
N 730 -840 730 -810 {
lab=VDD}
N 1650 -840 1650 -810 {
lab=VDD}
N 1190 -840 1190 -810 {
lab=VDD}
N 1650 -310 1650 -160 {
lab=#net3}
N 1190 -310 1190 -160 {
lab=#net4}
N 730 -440 820 -440 {
lab=VDD}
N 820 -840 820 -440 {
lab=VDD}
N 730 -340 820 -340 {
lab=GND}
N 820 -340 820 -50 {
lab=GND}
N 730 -130 820 -130 {
lab=GND}
N 1190 -340 1280 -340 {
lab=GND}
N 1280 -340 1280 -50 {
lab=GND}
N 1190 -130 1280 -130 {
lab=GND}
N 1650 -340 1750 -340 {
lab=GND}
N 1750 -340 1750 -50 {
lab=GND}
N 1650 -50 1750 -50 {
lab=GND}
N 1650 -130 1750 -130 {
lab=GND}
N 730 -780 820 -780 {
lab=VDD}
N 1190 -780 1280 -780 {
lab=VDD}
N 1190 -440 1280 -440 {
lab=VDD}
N 1280 -840 1280 -440 {
lab=VDD}
N 1650 -780 1750 -780 {
lab=VDD}
N 1750 -840 1750 -440 {
lab=VDD}
N 1650 -440 1750 -440 {
lab=VDD}
N 1610 -780 1610 -710 {
lab=v1}
N 1150 -780 1150 -710 {
lab=v1}
N 1610 -200 1610 -130 {
lab=v1}
N 1150 -200 1150 -130 {
lab=v1}
N 630 -200 630 -130 {
lab=v1}
N 170 -480 170 -440 {
lab=v1}
N 1830 -390 1830 -240 {
lab=osc}
N 580 -390 660 -390 {
lab=osc}
N 960 -130 1000 -130 {
lab=GND}
N 960 -130 960 -50 {
lab=GND}
N 1000 -100 1000 -50 {
lab=GND}
N 1000 -270 1000 -160 {
lab=#net5}
N 730 -270 1000 -270 {
lab=#net5}
N 1410 -130 1450 -130 {
lab=GND}
N 1410 -130 1410 -50 {
lab=GND}
N 1450 -100 1450 -50 {
lab=GND}
N 1450 -270 1450 -160 {
lab=#net4}
N 1880 -130 1920 -130 {
lab=GND}
N 1880 -130 1880 -50 {
lab=GND}
N 1920 -100 1920 -50 {
lab=GND}
N 1920 -270 1920 -160 {
lab=#net3}
N 1190 -270 1450 -270 {
lab=#net4}
N 1650 -270 1920 -270 {
lab=#net3}
N 490 -200 1610 -200 {
lab=v1}
N 730 -50 1650 -50 {
lab=GND}
N 1830 -390 2200 -390 {
lab=osc}
N 730 -310 730 -160 {
lab=#net5}
N 1750 -50 1920 -50 {
lab=GND}
N 940 -840 940 -810 {
lab=VDD}
N 900 -780 940 -780 {
lab=VDD}
N 900 -840 900 -780 {
lab=VDD}
N 940 -750 940 -640 {
lab=#net6}
N 1400 -840 1400 -810 {
lab=VDD}
N 1360 -780 1400 -780 {
lab=VDD}
N 1360 -840 1360 -780 {
lab=VDD}
N 1400 -750 1400 -640 {
lab=#net7}
N 1860 -840 1860 -810 {
lab=VDD}
N 1820 -780 1860 -780 {
lab=VDD}
N 1820 -840 1820 -780 {
lab=VDD}
N 1860 -750 1860 -640 {
lab=#net8}
N 690 -780 690 -710 {
lab=v1}
N 490 -710 1610 -710 {
lab=v1}
N 490 -710 490 -200 {
lab=v1}
N 630 -130 690 -130 {
lab=v1}
N 410 -200 490 -200 {
lab=v1}
N 730 -750 730 -470 {
lab=#net6}
N 730 -640 940 -640 {
lab=#net6}
N 1190 -750 1190 -470 {
lab=#net7}
N 1190 -640 1400 -640 {
lab=#net7}
N 1650 -750 1650 -470 {
lab=#net8}
N 1650 -640 1860 -640 {
lab=#net8}
N 730 -840 1860 -840 {
lab=VDD}
C {devices/vdd.sym} 1030 -840 0 0 {name=l1 lab=VDD}
C {devices/gnd.sym} 1110 -50 0 0 {name=l2 lab=GND}
C {sky130_fd_pr/nfet_01v8.sym} 710 -340 0 0 {name=M1
L=0.15
W=0.5
nf=1 
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8.sym} 710 -440 0 0 {name=M2
L=0.15
W=1
nf=2
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8.sym} 1170 -340 0 0 {name=M3
L=0.15
W=0.5
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8.sym} 1170 -440 0 0 {name=M4
L=0.15
W=1
nf=2
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8.sym} 1630 -340 0 0 {name=M5
L=0.15
W=0.5
nf=1 
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8.sym} 1630 -440 0 0 {name=M6
L=0.15
W=1
nf=2
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8.sym} 710 -130 0 0 {name=M7
L=0.15
W=1
nf=2 
mult=4
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8.sym} 1170 -130 0 0 {name=M8
L=0.15
W=1
nf=2 
mult=4
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8.sym} 1630 -130 0 0 {name=M9
L=0.15
W=1
nf=2 
mult=4
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8.sym} 710 -780 0 0 {name=M10
L=1.8
W=0.5
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8.sym} 1170 -780 0 0 {name=M11
L=1.8
W=0.5
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8.sym} 1630 -780 0 0 {name=M12
L=1.8
W=0.5
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {devices/vsource.sym} 60 -410 0 0 {name=Vdd value=1.8 savecurrent=false
* "pwl()"}
C {devices/gnd.sym} 60 -380 0 0 {name=l3 lab=GND}
C {devices/vdd.sym} 60 -440 0 0 {name=l4 lab=VDD}
C {devices/vsource.sym} 170 -410 0 0 {name=vcont value=1.2 savecurrent=false}
C {devices/gnd.sym} 170 -380 0 0 {name=l5 lab=GND}
C {devices/lab_pin.sym} 170 -480 0 1 {name=p1 sig_type=std_logic lab=v1}
C {devices/lab_pin.sym} 410 -200 0 0 {name=p2 sig_type=std_logic lab=v1}
C {sky130_fd_pr/corner.sym} 50 -690 0 0 {name=CORNER only_toplevel=false corner=tt}
C {devices/code.sym} 190 -688.75 0 0 {name=STIMULI only_toplevel=false value="

.option method=gear
.option wnflag=1


*.ic v(vcont)=1.2

*.temp = 75

* Xmeasure osc freq2 measure_Kvco thresh=0.9 dir=1

.control

  * pre_osdi ./measure_Kvco.osdi

  let v_cont_start = 0.0
  let v_cont_stop = 1.9

  dowhile v_cont_start <= v_cont_stop
    alter vcont $&v_cont_start
    save v(vcont) v(osc) v(vout) v(v1) v(v2) i(vmeas) i(vmeas1)
    *save all
    tran 1ps 30ns
    remzerovec
    write tb_current_starved_VCO4_\{$&v_cont_start\}.raw
    * write tb_current_starved_VCO4.raw
    linearize v(osc)
    let filename = v_cont_start * 100
    wrdata /foss/designs/my_design/projects/pll/vco/xschem_ngspice/tb_current_starved_VCO4_\{$&filename\}.txt v(osc)
    set appendwrite

    reset
    let v_cont_start = v_cont_start + 0.1
  end
.endc


"}
C {devices/lab_pin.sym} 2040 -390 0 1 {name=p3 sig_type=std_logic lab=osc}
C {sky130_fd_pr/nfet_01v8.sym} 1020 -130 0 1 {name=M18
L=1.2
W=1
nf=2 
mult=4
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8.sym} 1470 -130 0 1 {name=M19
L=1.2
W=1
nf=2 
mult=4
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8.sym} 1940 -130 0 1 {name=M20
L=1.2
W=1
nf=2 
mult=4
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8
spiceprefix=X
}
C {devices/vdd.sym} 1040 -130 0 1 {name=l6 lab=VDD}
C {devices/vdd.sym} 1490 -130 0 1 {name=l7 lab=VDD}
C {devices/vdd.sym} 1960 -130 0 1 {name=l8 lab=VDD}
C {sky130_fd_pr/pfet_01v8.sym} 960 -780 0 1 {name=M15
L=0.15
W=2
nf=4
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {devices/gnd.sym} 980 -780 0 0 {name=l9 lab=GND}
C {sky130_fd_pr/pfet_01v8.sym} 1420 -780 0 1 {name=M17
L=0.15
W=2
nf=4
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {devices/gnd.sym} 1440 -780 0 0 {name=l10 lab=GND}
C {sky130_fd_pr/pfet_01v8.sym} 1880 -780 0 1 {name=M22
L=0.15
W=2
nf=4
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8
spiceprefix=X
}
C {devices/gnd.sym} 1900 -780 0 0 {name=l11 lab=GND}
